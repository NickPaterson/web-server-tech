<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">

    <link rel="stylesheet" href="/_r/css/core.css">
    <link rel="stylesheet" href="/_r/css/components/carousel.css">
    <script src="https://kit.fontawesome.com/8468662b6c.js" crossorigin="anonymous"></script>
    <script src="/_r/js/core.js" defer></script>

    <title>Nick Paterson WST - Data Gathering</title>
</head>
<body class="dark">
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <!-- Kaushan Script -->
                <a href="https://nickpaterson.dev/" class="logo__home-link" target="_blank">
                    <svg id="svgGroup" class="logo__svg" width="84.435" height="63.31" viewBox="0 0 84.435 63.31" xmlns="http://www.w3.org/2000/svg">
                        <path id="logo1" d="M12.285 62.27 L 11.765 63.31 Q 10.14 63.05 8.223 62.563 A 14.669 14.669 0 0 1 4.987 61.332 A 13.615 13.615 0 0 1 4.68 61.165 Q 3.055 60.255 1.95 58.858 Q 0.845 57.46 0.845 55.445 A 9.542 9.542 0 0 1 1.052 53.524 Q 1.235 52.633 1.581 51.668 A 17.212 17.212 0 0 1 1.787 51.123 Q 2.73 48.75 3.835 46.215 Q 4.94 43.68 5.883 41.113 Q 6.825 38.545 6.825 36.27 A 8.365 8.365 0 0 0 6.715 34.858 Q 6.588 34.122 6.317 33.557 A 3.091 3.091 0 0 0 5.167 32.24 A 6.455 6.455 0 0 0 3.192 31.436 Q 2.372 31.244 1.421 31.208 A 11.8 11.8 0 0 0 0.975 31.2 A 2.326 2.326 0 0 1 0.623 30.956 Q 0.423 30.786 0.295 30.586 A 1.539 1.539 0 0 1 0.293 30.583 Q 0.085 30.257 0.013 29.958 A 1.474 1.474 0 0 1 0 29.9 L 2.275 28.86 A 11.515 11.515 0 0 0 4.459 27.611 A 8.575 8.575 0 0 0 6.5 25.513 A 17.667 17.667 0 0 0 8.585 21.283 A 19.909 19.909 0 0 0 8.743 20.8 A 51.108 51.108 0 0 0 9.793 16.878 A 59.527 59.527 0 0 0 10.14 15.243 A 34.633 34.633 0 0 1 11.716 9.762 A 38.35 38.35 0 0 1 11.895 9.295 Q 12.675 7.28 13.65 5.59 A 16.837 16.837 0 0 1 14.877 3.744 A 13.717 13.717 0 0 1 15.795 2.665 A 10.216 10.216 0 0 1 17.415 1.268 A 8.873 8.873 0 0 1 18.33 0.715 Q 19.695 0 21.255 0 Q 22.36 0 23.335 0.52 A 5.142 5.142 0 0 1 23.925 0.895 Q 24.73 1.479 25.805 2.6 Q 23.79 3.575 22.49 4.973 Q 21.19 6.37 20.345 8.06 A 20.515 20.515 0 0 0 19.09 11.217 A 22.958 22.958 0 0 0 18.948 11.7 Q 18.395 13.65 17.94 15.73 Q 17.42 17.875 16.803 20.053 Q 16.185 22.23 15.08 24.18 Q 13.975 26.13 12.285 27.658 A 10.657 10.657 0 0 1 10.214 29.106 Q 9.212 29.651 8.008 30.068 A 17.544 17.544 0 0 1 7.93 30.095 A 11.21 11.21 0 0 1 10.393 32.068 A 9.919 9.919 0 0 1 11.505 33.508 A 8.297 8.297 0 0 1 12.701 36.827 A 10.79 10.79 0 0 1 12.805 38.35 A 14.825 14.825 0 0 1 12.424 41.62 A 18.904 18.904 0 0 1 11.83 43.68 Q 10.855 46.475 9.718 49.14 Q 8.58 51.805 7.605 54.08 Q 6.976 55.549 6.753 56.719 A 6.412 6.412 0 0 0 6.63 57.915 A 3.665 3.665 0 0 0 6.827 59.148 Q 7.167 60.106 8.093 60.702 A 3.959 3.959 0 0 0 8.157 60.743 Q 9.267 61.427 10.943 61.923 A 20.892 20.892 0 0 0 12.285 62.27 Z" vector-effect="non-scaling-stroke"/>
                        <path id="logo2" d="M31.32 4.156 A 1.374 1.374 0 0 0 31.135 4.485 Q 33.475 13.845 35.978 22.848 Q 38.48 31.85 40.95 39.585 Q 42.204 43.513 43.433 47.014 A 197.777 197.777 0 0 0 45.792 53.398 A 101.016 101.016 0 0 0 47.325 57.117 Q 48.079 58.841 48.808 60.297 A 41.626 41.626 0 0 0 50.31 63.05 Q 51.025 62.92 51.902 62.043 A 4.903 4.903 0 0 0 52.162 61.763 A 4.005 4.005 0 0 0 53.04 60.06 A 23.487 23.487 0 0 1 52.956 59.879 Q 52.366 58.585 51.681 56.688 A 86.123 86.123 0 0 1 50.993 54.698 Q 50.353 52.778 49.661 50.509 A 252.228 252.228 0 0 1 48.555 46.768 A 280.426 280.426 0 0 1 47.239 42.031 A 361.084 361.084 0 0 1 45.89 36.855 A 323.037 323.037 0 0 1 45.212 34.123 A 370.014 370.014 0 0 1 43.225 25.513 Q 41.925 19.565 40.755 13.293 Q 39.585 7.02 38.675 0.715 Q 38.139 0.715 37.403 0.899 A 10.88 10.88 0 0 0 36.692 1.105 Q 35.49 1.495 34.32 2.08 A 17.709 17.709 0 0 0 33.346 2.604 A 13.99 13.99 0 0 0 32.24 3.315 Q 31.607 3.767 31.32 4.156 Z" vector-effect="non-scaling-stroke"/>
                        <path id="logo3" d="M72.15 1.04 L 72.67 0 Q 74.295 0.26 76.213 0.748 A 14.669 14.669 0 0 1 79.448 1.978 A 13.615 13.615 0 0 1 79.755 2.145 Q 81.38 3.055 82.485 4.453 Q 83.59 5.85 83.59 7.865 A 9.542 9.542 0 0 1 83.383 9.786 Q 83.2 10.678 82.854 11.642 A 17.212 17.212 0 0 1 82.648 12.188 Q 81.705 14.56 80.6 17.095 Q 79.495 19.63 78.553 22.198 Q 77.61 24.765 77.61 27.04 A 8.365 8.365 0 0 0 77.72 28.452 Q 77.847 29.188 78.118 29.753 A 3.091 3.091 0 0 0 79.268 31.07 A 6.455 6.455 0 0 0 81.243 31.874 Q 82.063 32.066 83.014 32.102 A 11.8 11.8 0 0 0 83.46 32.11 A 2.326 2.326 0 0 1 83.812 32.354 Q 84.012 32.524 84.14 32.724 A 1.539 1.539 0 0 1 84.142 32.728 Q 84.35 33.053 84.422 33.352 A 1.474 1.474 0 0 1 84.435 33.41 L 82.16 34.45 A 12.361 12.361 0 0 0 80.01 35.711 A 8.947 8.947 0 0 0 77.935 37.83 A 17.027 17.027 0 0 0 75.933 41.789 A 19.468 19.468 0 0 0 75.693 42.51 A 51.108 51.108 0 0 0 74.642 46.432 A 59.527 59.527 0 0 0 74.295 48.068 A 34.633 34.633 0 0 1 72.719 53.548 A 38.35 38.35 0 0 1 72.54 54.015 A 23.578 23.578 0 0 1 70.938 57.486 A 17.668 17.668 0 0 1 68.64 60.678 A 9.074 9.074 0 0 1 66.766 62.269 A 6.638 6.638 0 0 1 63.18 63.31 Q 62.075 63.31 61.1 62.79 A 5.142 5.142 0 0 1 60.51 62.415 Q 59.705 61.831 58.63 60.71 Q 60.645 59.735 61.945 58.338 Q 63.245 56.94 64.09 55.25 A 18.962 18.962 0 0 0 65.355 51.973 A 21.134 21.134 0 0 0 65.455 51.61 A 265.071 265.071 0 0 0 66.43 47.84 A 290.102 290.102 0 0 0 66.495 47.58 Q 67.015 45.435 67.633 43.258 Q 68.25 41.08 69.355 39.13 Q 70.46 37.18 72.15 35.653 A 10.657 10.657 0 0 1 74.221 34.204 Q 75.223 33.659 76.427 33.242 A 17.544 17.544 0 0 1 76.505 33.215 A 11.21 11.21 0 0 1 74.042 31.242 A 9.919 9.919 0 0 1 72.93 29.803 A 8.297 8.297 0 0 1 71.734 26.483 A 10.79 10.79 0 0 1 71.63 24.96 A 14.825 14.825 0 0 1 72.011 21.69 A 18.904 18.904 0 0 1 72.605 19.63 Q 73.58 16.835 74.718 14.17 Q 75.855 11.505 76.83 9.23 Q 77.459 7.762 77.682 6.591 A 6.412 6.412 0 0 0 77.805 5.395 A 3.665 3.665 0 0 0 77.608 4.162 Q 77.268 3.204 76.342 2.608 A 3.959 3.959 0 0 0 76.278 2.568 Q 75.168 1.883 73.492 1.387 A 20.892 20.892 0 0 0 72.15 1.04 Z" vector-effect="non-scaling-stroke"/>
                    </svg>
                </a>
            </div>
            <div class="nav__main">
                <ul class="nav__list">
                    <li class="nav__item"><a href="/dataGathering/singleData.php">View Users</a></li>
                    <li class="nav__item"><a href="/dataGathering/index.html">Insert User</a></li>
                </ul>
                <!-- theme toggle -->
                <div id="themeToggler" class="theme-toggler "></div>  
            </div>
        </nav>
    </header>
    <h1 class="page-title">Data Gathering - Select Single Data</h1> 

<?php 
// RDBMS coonection paramters
$database = "data_gathering";
$username = "nick";
$password  = "21)A.ocM(8tGJFqx";


try {
	$dbh = new PDO("mysql:host=localhost;dbname=$database", $username, $password); // Connecting, selecting database
	$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // SQL errors will not be silent

    // Retrieve form data 
    $userID = $_POST['userID'];
    $bannerID = $_POST['bannerID'];
    $fullname = $_POST['fullname'];
    $travelMode = $_POST['travelMode'];
	$stmt= $dbh->prepare("UPDATE userData SET bannerID = '$bannerID', fullname = '$fullname', travelMode = '$travelMode' WHERE userID = '$userID';"); // prepare for execution & return a statement objecT
	$stmt->execute();
	// echo "<br>rowCount: ",  $stmt->rowCount(), "<br>"; // USEFUL FOR DIAGNOSTICS AFTER EACH EXECUTE, REMOVE OR COMMENT OUT WHEN TESTING COMPLETE
	// echo "<br>debugDumpParams:<br><pre>" , $stmt->debugDumpParams(), "</pre>"; // USEFUL FOR DIAGNOSTICS, REMOVE OR COMMENT OUT WHEN TESTING COMPLETE
	$dbh = null; // Closing connection after success

} catch (PDOException $e) {
	$dbh = null; // Closing connection if some error has occurred
	print "Error!: " . $e->getMessage() . "<br/>"; // WARNING - error messages are potential security weakness on production sites
	print "PHP Line Number: " . $e->getLine() . "<br/>"; 
	print "PHP File: " . $e->getFile() . "<br/>";
	die();
}


try {
	$dbh = new PDO("mysql:host=localhost;dbname=$database", $username, $password); // Connecting, selecting database
	$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // SQL errors will not be silent

 
    // Retrieve form data 
    $id = $_POST['userID'];

	$stmt= $dbh->prepare("SELECT userID, fullname, bannerID, travelMode FROM userData WHERE userID = '$id';"); // prepare for execution & return a statement object
	$stmt->bindColumn( 'userID', $userIDSel );
	$stmt->bindColumn( 'fullname', $fullnameSel ); // Bind named column to a named PHP variable
	$stmt->bindColumn( 'bannerID', $bannerIDSel ); 
    $stmt->bindColumn( 'travelMode', $travelModeSel );
	$stmt->execute();
	// echo "<br>rowCount: ",  $stmt->rowCount(), "<br>"; // USEFUL FOR DIAGNOSTICS AFTER EACH EXECUTE, REMOVE OR COMMENT OUT WHEN TESTING COMPLETE
	// echo "<br>debugDumpParams:<br><pre>" , $stmt->debugDumpParams(), "</pre>"; // USEFUL FOR DIAGNOSTICS, REMOVE OR COMMENT OUT WHEN TESTING COMPLETE
	echo "<table><tr><th>User ID</th><th>Fullname</th><th>Banner ID</th><th>Travel Mode</th><th>Delete</th><th>Update</th></tr>";
    while ( $stmt->fetch(PDO::FETCH_BOUND) ){ // fetch one row of results binding coulmn values to PHP variables
		echo "<tr>";
        echo "<td>$userIDSel</td>";
		echo "<td>$fullnameSel</td>";
		echo "<td>$bannerIDSel</td>";
		echo "<td>$travelModeSel</td>";

		echo "<td><form action='deleteUserData.php' method='GET'>";
        echo "<input type='hidden' name='id' value='$userIDSel'>";
		echo "<button type='submit'>Delete</button>";
        echo "</td></form>";

        echo "<td><form action='updateUserDataForm.php' method='GET'>";
        echo "<input type='hidden' name='id' value='$userIDSel'>";
		echo "<button type='submit'>Update</button>";
		echo "</form></td>";
        echo "</tr>";
	}
    echo "</table>";
	$dbh = null; // Closing connection after success
} catch (PDOException $e) {
	$dbh = null; // Closing connection if some error has occurred
	print "Error!: " . $e->getMessage() . "<br/>"; // WARNING - error messages are potential security weakness on production sites
	print "PHP Line Number: " . $e->getLine() . "<br/>"; 
	print "PHP File: " . $e->getFile() . "<br/>";
	die();
}


?>
</body>
</html>